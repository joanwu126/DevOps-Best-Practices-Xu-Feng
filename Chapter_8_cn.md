# 8 可交付成果
## 8.1 介绍
本文介绍了一些DevOps计划的最重要交付成果。
## 8.2 术语
#### 漏斗
漏斗是表示选择路径的一个比喻，见图8-1。图形表示的是一个漏斗。有多个想法等待实现，当一个想法变得越来越清晰，商业用例变得更清晰，这个想法就进入了漏斗，最后被选中成为路线图中的计划。使命、愿景、业务目标和实施策略是漏斗的主要驱动因素。而且，DevOps组织要实现更快的上市时间和更高的SLA指标也是漏斗的驱动因素。
#### 路线图
路线图是描述产品或服务实现路径的一种方法，见图8-2。产品可以包含信息、应用程序或基础设施对象，产品用来为顾客提供服务。路线图显示了最重要的功能必须实现的时间表。必须考虑到整个产品和服务组合以防止瓶颈。
#### 发布计划
发布计划是待办事项列表的基础。发布计划包含了必须实现的史诗，史诗代表产品组合中的项目，后一个版本将更详细地描述如何将史诗细化成特征。
#### 流
在DevOps中，经常使用精益原则，其中最吸引人的是流，DevOps团队应该在没有等待时间、没有修复的特定节奏中交付产品。因此，用最少的成本和理想的质量来实现市场的最大上市时间。
#### 推和拉
在DevOps中，“拉”机制的使用表明控制流的是需求而不是供应。因此，在供应范围内，没有库存。
#### 技术债务
这个术语代表那些在意识到不值得获得美容大奖之前已经做出的选择。这些产品和/或服务已经发布，但是需要进一步的重新设计，证明它是一种不过时的技术。在最坏的情况下，它是一种“创可贴”。
## 8.3 概念
#### 功能分解
这个概念描述了实现产品或服务是一个从粗到细、逐步精进的思路。按照这样方式，想法通过漏斗、路线图计划、发布计划和冲刺计划最终被实现。
## 8.4 最佳实践
越来越多的组织使用敏捷原则来创建或者更改向企业提供的服务。在很多组织中，用待办事项列表作为起点来收集特征，并按照用户故事格式编写它们。DevOps团队实现这些功能，并将创建和变更的对象部署到产品中。这种方法可能对诸如内容管理更新之类的小变更是有效的。然而，对于完整的新服务，上述方法在实践中并不起作用。这时需要基于体系结构方法进行功能分解，通常这种方法不被重视，经常用到“不完成预先定义的工作” 口号。本文解释了基于漏斗管理、路线图和发布计划进行功能分解的好处。
### 8.4.1 完成预先定义的工作
很多组织期望DevOps团队计划仅包含由产品负责人制定的产品待办事项列表。产品待办事项列表的顶部具有最高优先级，从顶部向下细化，越往下，事项越大，优先级越低。在这种情况下，经常用到“不完成预先定义工作”的口号。
在这些组织中，你也会看到，只有在每次冲刺时才会考虑体系架构，并且架构是增量、迭代地制定的。只有一种解决方案架构师，负责指挥DevOps团队完成手头上待冲刺的变更。通常架构中甚至没有一个角色。
### 8.4.2 漏斗管理
漏斗管理的一种反面模式是：一个组织的开发团队每次冲刺都会收到新的、变化的指示，因为这些任务必须快速实现。在这种情况，不存在漏斗管理，甚至不存在流。事实上，这样的组织不受来自使命、愿景、商业目标和策略的DevOps控制。如果存在一个目标方向，那么这种DevOps团队同目标方向毫无关联。
在这种情况下，认识到漏斗管理的好处是非常重要的，主要优点在于：
*	漏斗管理定义了实现商业目标中非常重要的利益相关者。考虑了市场营销、商业经理、架构师、人力资源经理、产品负责人、安全官员及服务人员。
*	漏斗管理需要在战略层面上反复优先考虑，并确保每个利益相关者在利益转变时会及时发出信号。
* 利益相关者合作能够保证对于变革的投入和担当依然维持高水平。
* 架构师可以很好地指导利益相关者勾画出体现业务目标、战略和想法的目标体系结构。
* 想要更好地规范DevOps的理念也可以包含在漏斗中。例如，确定用在云端进行管道部署的方式取代内部部署（本地自有服务器）。
* 漏斗管理提供了一种选择，根据方向来发展产品和服务，而不是基于今天的问题发展产品和服务。
* 漏斗管理提供了通过确定成本和收益来定义业务用例的能力。这里的成本不仅包括DevOps团队的成本，还包括为缓解风险采取对策的成本。风险不仅与可行性和实用性有关（时间和金钱），而且与SLA规范的实现有关。
对于某些组织而言，漏斗管理仅仅是个执行问题。其他组织则需要转型战略。决定为什么要中断冲刺并避免流是非常重要的。一开始可以区分两种类型的DevOps团队：一种DevOps团队仅接受漏斗驱动，按照路线图和发布计划进行工作；另一种DevOps团队仅接受业务事件、救火案例、临时任务等特殊工作。这样做，至少可以让一个DevOps团队有机会证明DevOps的优点。
### 8.4.3 路线图
每个产品或服务都制定了路线图。编译路线图最简单的方法是用两个轴绘制一个图表。纵轴是利益相关者，横轴是一年中的四分之一。接下来，每个单元都可以标识出利益相关者在哪个季度实现哪些功能。
每个季度按块对功能和质量进行分类，听起来很简单，但执行起来却是跨度很大的一步。从架构中检查指令是否合乎逻辑是很重要的。
总有些问题需要优先考虑，因为这些情况需要预处理，如安全认证、授权的形式配置，加密等。然而，通常这些都是可以使用的标准功能。
产品和服务之间的接口并不相同，每个产品和服务都有自己的路线图，这些路线图的合集必须纳入一个协调的整体路线图中。如果一个产品或服务出现在多个链中，那么规划路线图将变得很困难。因此，没有体系结构的路线测绘和漏斗管理是不可能的。
### 8.4.4 发布计划
当路线图已经建立，发布计划很容易实现。未来功能的元素仍然模糊不清，在第一次发布之前详细描述实际的好处。虽然DevOps采用稳定流的连续拉机制，按照发布计划格式进行功能分解仍然非常重要。
发布计划的一种反模式是增量、迭代地生成应用程序，耗费更多时间且质量不断恶化，因为新功能不适应现有功能。通常没有更多的时间进行重构来重新设计旧产品和服务。发布计划只能按照计划留出包括产品和服务重构的时间，如按照路线图计划。
发布计划的另一种反模式是引入技术债务。漏斗和路线图是一个好的DevOps流程和产品/服务架构的必备元素，从而避免技术债务。通过将架构贯穿于从想法到部署的整个生命周期，技术债务的对策将被考虑在内。
